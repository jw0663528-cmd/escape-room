<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Biomimicry Express Journey</title>
    <style>
        :root {
            --overlay-bg: rgba(44, 28, 18, 0.9);
            --text-color: #f0e6d2;
            --accent-color: #e7b36a;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #1a1a1a;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
        }

        #game-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            aspect-ratio: 16 / 9;
            /* Using the image source provided in the prompt's HTML snippet */
            background-image: url('https://i.ibb.co/7tQt5S0h/Gemini-Generated-Image-prcu4rprcu4rprcu.png');
            background-size: cover;
            background-position: center;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            border-radius: 12px;
            overflow: hidden;
        }

        /* --- HUD --- */
        #hud {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--overlay-bg);
            color: var(--text-color);
            padding: 15px 25px;
            border-radius: 8px;
            border: 2px solid var(--accent-color);
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
            max-width: 300px;
        }

        #mission-title {
            margin: 0 0 10px 0;
            color: var(--accent-color);
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        #mission-text {
            font-size: 0.95rem;
            line-height: 1.4;
        }

        /* --- INTERACTIVE HOTSPOTS --- */
        .hotspot {
            position: absolute;
            /* Using opacity 0 makes them invisible but clickable. 
               Change to opacity: 0.3 and bg-color: red to debug positions. */
            opacity: 0; 
            cursor: pointer;
            display: none; /* Hidden by default until activated */
        }

        /* Coordinates mapped to the specific image provided */
        #spot-cat {
            top: 16%;
            left: 21%;
            width: 10%;
            height: 10%;
            border-radius: 50%;
        }

        #spot-hat {
            top: 27%;
            left: 68%;
            width: 9%;
            height: 17%;
            transform: rotate(-10deg);
        }

        #spot-window {
            top: 20%;
            left: 36%;
            width: 27%;
            height: 40%;
        }

        /* --- DIALOG MODAL --- */
        #dialog-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 100;
        }

        #dialog-overlay.active {
            visibility: visible;
            opacity: 1;
        }

        #dialog-box {
            background: var(--overlay-bg);
            border: 3px solid var(--accent-color);
            padding: 30px;
            border-radius: 12px;
            max-width: 600px;
            text-align: center;
            color: var(--text-color);
            transform: translateY(20px);
            transition: transform 0.3s;
        }

        #dialog-overlay.active #dialog-box {
            transform: translateY(0);
        }

        #dialog-title {
            color: var(--accent-color);
            margin-top: 0;
        }

        #dialog-content {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        #dialog-btn {
            background: var(--accent-color);
            border: none;
            padding: 10px 25px;
            font-size: 1rem;
            font-weight: bold;
            color: #2c1c12;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.2s;
        }

        #dialog-btn:hover {
            background: #ffcc80;
        }

    </style>
</head>
<body>

<div id="game-container">
    <div id="hud">
        <h3 id="mission-title">Mission 1: Departure</h3>
        <p id="mission-text">Welcome to the Biomimicry Express. We use nature's secrets to survive the journey. First task: We have a nervous passenger needing a painless injection. Look around the cabin for inspiration on how to perform a needle strike without waking someone up.</p>
    </div>

    <div id="spot-cat" class="hotspot"></div>
    
    <div id="spot-hat" class="hotspot"></div>

    <div id="spot-window" class="hotspot"></div>


    <div id="dialog-overlay">
        <div id="dialog-box">
            <h2 id="dialog-title">Biomimicry Insight Found!</h2>
            <p id="dialog-content">Content goes here.</p>
            <button id="dialog-btn">Continue Journey</button>
        </div>
    </div>
</div>

<script>
    // Game State
    let currentMissionIndex = 0;

    // DOM Elements
    const hudTitle = document.getElementById('mission-title');
    const hudText = document.getElementById('mission-text');
    const dialogOverlay = document.getElementById('dialog-overlay');
    const dialogTitle = document.getElementById('dialog-title');
    const dialogContent = document.getElementById('dialog-content');
    const dialogBtn = document.getElementById('dialog-btn');

    const hotspots = {
        cat: document.getElementById('spot-cat'),
        hat: document.getElementById('spot-hat'),
        window: document.getElementById('spot-window'),
    };

    // Mission Data (Based on previous mosquito biomimicry context)
    const missions = [
        {
            title: "Mission 1: The Painless Strike",
            instruction: "We need to administer a painless injection to a nervous passenger. Find inspiration in the cabin for stealthy, unnoticed contact.",
            activeHotspot: 'cat',
            successTitle: "Insight: The Stealth Needle",
            successText: "Excellent. Observing the sleeping cat reminds us of the mosquito's proboscis. By using a micro-serrated needle that vibrates, and applying a numbing saliva anesthetic, we can perform injections that are virtually painless. The passenger didn't feel a thing.",
        },
        {
            title: "Mission 2: Tunnel Vision",
            instruction: "We are entering a pitch-black tunnel with hazardous gas readings. Our standard navigation is down. Find something related to guidance or sensing to help us navigate the dark.",
            activeHotspot: 'hat',
            successTitle: "Insight: Chemical Sensors",
            successText: "Correct. The conductor's hat represents guidance. Like a mosquito uses antennae to detect CO2 and heat plumes in the dark to find a host, we will switch our train sensors to detect thermal gradients and chemical markers to navigate the tunnel safely.",
        },
        {
            title: "Mission 3: High Winds Ahead",
            instruction: "We've exited the tunnel into a storm. We need to launch a small repair drone outside, but the winds are too strong for standard stabilizers. Look outside for inspiration on stable flight.",
            activeHotspot: 'window',
            successTitle: "Insight: Gyroscopic Stabilizers",
            successText: "Looking out the window at the turbulent air, we remember how mosquitos fly in rain. They use 'halteres'—tiny vibrating structures behind their wings—as gyroscopes for rapid stabilization. We've applied this principle to the drone. It's stable and launching now.",
        },
        {
            title: "Journey Complete",
            instruction: "You have successfully utilized biomimicry principles to navigate the dangers of the journey. Welcome to your destination.",
            activeHotspot: null, // No active hotspot for final state
            successTitle: "",
            successText: "",
        }
    ];

    // Initialize Game
    function initGame() {
        loadMission(0);
        
        // Event Listeners for Hotspots
        for (const key in hotspots) {
            hotspots[key].addEventListener('click', () => checkSolution(key));
        }

        dialogBtn.addEventListener('click', nextMission);
    }

    function loadMission(index) {
        currentMissionIndex = index;
        const mission = missions[index];

        hudTitle.innerText = mission.title;
        hudText.innerText = mission.instruction;

        // Hide all hotspots first
        for (const key in hotspots) {
            hotspots[key].style.display = 'none';
        }

        // Activate only the relevant hotspot for this mission
        if (mission.activeHotspot) {
            hotspots[mission.activeHotspot].style.display = 'block';
        }
    }

    function checkSolution(clickedHotspotKey) {
        const mission = missions[currentMissionIndex];
        
        if (clickedHotspotKey === mission.activeHotspot) {
            // Success! Show dialog
            dialogTitle.innerText = mission.successTitle;
            dialogContent.innerText = mission.successText;
            dialogOverlay.classList.add('active');
        }
    }

    function nextMission() {
        dialogOverlay.classList.remove('active');
        if (currentMissionIndex < missions.length - 1) {
            loadMission(currentMissionIndex + 1);
        }
    }

    // Start
    initGame();

</script>

</body>
</html>
