<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×—×“×¨ ×‘×¨×™×—×”: ××¢×‘×“×ª ×”×—×§×™×¨×”</title>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --accent: #00ff55;
            --text: #eee;
        }

        body {
            margin: 0;
            background: var(--bg-color);
            color: var(--text);
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        /* --- THE SCENE CONTAINER (The "Image") --- */
        #lab-scene {
            width: 800px;
            height: 500px;
            background: 
                /* Shelf shadow */
                linear-gradient(to bottom, rgba(0,0,0,0.8), transparent 20%),
                /* Desk Surface */
                linear-gradient(to bottom, #2c3e50 0%, #2c3e50 60%, #1a252f 60%, #111 100%);
            position: relative;
            border: 5px solid #444;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            overflow: hidden;
        }

        /* --- DECORATIONS (CSS ART TO MAKE IT LOOK LIKE A ROOM) --- */
        .shelf {
            position: absolute; top: 100px; left: 50px; width: 300px; height: 10px; background: #554433;
            box-shadow: 5px 5px 10px rgba(0,0,0,0.5);
        }
        .window {
            position: absolute; top: 50px; right: 100px; width: 150px; height: 150px; 
            background: #001133; border: 4px solid #333;
            box-shadow: inset 0 0 20px #000;
        }
        .window::after { /* Moon */
            content: ''; position: absolute; top: 20px; left: 20px; width: 30px; height: 30px; 
            background: #ffc; border-radius: 50%; box-shadow: 0 0 10px #ffc;
        }

        /* --- INTERACTIVE OBJECTS --- */
        .item {
            position: absolute;
            cursor: pointer;
            transition: transform 0.2s, filter 0.2s;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.5));
            /* Emoji font size acts as image size */
            font-size: 4rem; 
            user-select: none;
        }

        .item:hover {
            transform: scale(1.1) rotate(5deg);
            filter: drop-shadow(0 0 10px var(--accent));
        }

        /* Specific Positions for Items */
        #microscope { bottom: 180px; left: 100px; font-size: 6rem; }
        #notebook { bottom: 160px; left: 350px; transform: rotate(-10deg); }
        #coffee { bottom: 170px; right: 250px; font-size: 3rem; }
        #safe { bottom: 160px; right: 50px; font-size: 7rem; }
        #postit { top: 60px; left: 100px; font-size: 3rem; transform: rotate(5deg); }

        /* --- MODALS (The Riddles) --- */
        .modal-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: #222;
            border: 2px solid var(--accent);
            padding: 30px;
            width: 400px;
            text-align: center;
            border-radius: 10px;
            box-shadow: 0 0 30px var(--accent);
            position: relative;
        }

        .close-btn {
            position: absolute; top: 10px; right: 15px; cursor: pointer; color: #888; font-weight: bold;
        }
        .close-btn:hover { color: #fff; }

        input { padding: 10px; margin-top: 10px; background: #111; border: 1px solid #555; color: white; width: 70%; text-align: center; }
        button { padding: 10px 20px; margin-top: 10px; background: var(--accent); border: none; font-weight: bold; cursor: pointer; }
        
        .clue-found { color: var(--accent); font-weight: bold; margin-top: 15px; display: none; border: 1px dashed var(--accent); padding: 10px;}

        /* --- INVENTORY / HUD --- */
        #inventory {
            position: absolute; top: 10px; left: 10px; 
            background: rgba(0,0,0,0.6); padding: 10px; border-radius: 5px;
        }
    </style>
</head>
<body>

    <div id="lab-scene">
        <div class="window"></div>
        <div class="shelf"></div>

        <div id="microscope" class="item" onclick="openModal('modal-microscope')">ğŸ”¬</div>
        
        <div id="notebook" class="item" onclick="openModal('modal-notebook')">ğŸ“</div>
        
        <div id="coffee" class="item" onclick="alert('×¡×ª× ×§×¤×” ×§×¨. ××™×Ÿ ×¤×” ×›×œ×•×.')">â˜•</div>

        <div id="postit" class="item" onclick="openModal('modal-postit')">ğŸŸ¨</div>

        <div id="safe" class="item" onclick="openModal('modal-safe')">ğŸ—„ï¸</div>

        <div id="inventory">×¨××–×™× ×©× ××¡×¤×•: <span id="clue-count">0</span>/3</div>

        <div id="modal-microscope" class="modal-overlay">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModals()">X</span>
                <h2>×”××™×§×¨×•×¡×§×•×¤</h2>
                <p>××ª×” ××‘×™×˜ ×‘×¢×“×©×”. ×¨×•××™× ×ª××™× ××ª×—×œ×§×™×.</p>
                <p>×—×™×“×”: ××”×• ×”××™×‘×¨ ×‘×’×•×£ ×”×™×ª×•×© ×©×××¤×©×¨ ×œ×• ×œ×©××•×¢?</p>
                <input type="text" id="ans-micro" placeholder="×”×ª×©×•×‘×” ×‘×¢×‘×¨×™×ª...">
                <button onclick="checkAnswer('ans-micro', '×’×•× ×¡×˜×•×Ÿ', 'clue-1')">×‘×“×•×§</button>
                <div id="clue-1" class="clue-found">×¡×¤×¨×” ×¨××©×•× ×” ×œ×§×•×“: 7</div>
            </div>
        </div>

        <div id="modal-notebook" class="modal-overlay">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModals()">X</span>
                <h2>×™×•××Ÿ ×”××—×§×¨</h2>
                <p>×”×“×¤×™× ×§×¨×•×¢×™×. ×›×ª×•×‘ ×‘×›×ª×‘ ×™×“ ×¦×¤×•×£:</p>
                <p>"×”×™×ª×•×© ×¢×£ ×‘×’×©× ×‘×œ×™ ×œ×”×™×¨×˜×‘..."</p>
                <p>×”×©×œ×: ×”×¢×™× ×™×™× ×©×œ ×”×™×ª×•×© ×”×Ÿ ______ (×“×•×—×•×ª ××™×)</p>
                <input type="text" id="ans-note" placeholder="××™×œ×” ×‘×œ×•×¢×–×™×ª ××• ×¢×‘×¨×™×ª">
                <button onclick="checkAnswer('ans-note', '×”×™×“×¨×•×¤×•×‘×™×•×ª', 'clue-2')">×‘×“×•×§</button>
                <div id="clue-2" class="clue-found">×¡×¤×¨×” ×©× ×™×™×” ×œ×§×•×“: 2</div>
            </div>
        </div>

        <div id="modal-postit" class="modal-overlay">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModals()">X</span>
                <h2>×¤×ª×§ × ×¡×ª×¨</h2>
                <p>××™×©×”×• ×”×“×‘×™×§ ××ª ×–×” ×’×‘×•×” ×¢×œ ×”××“×£.</p>
                <p>×—×™×“×”: ×›××” ×¨×’×œ×™×™× ×™×© ×œ×™×ª×•×©?</p>
                <input type="number" id="ans-postit">
                <button onclick="checkAnswer('ans-postit', '6', 'clue-3')">×‘×“×•×§</button>
                <div id="clue-3" class="clue-found">×¡×¤×¨×” ×©×œ×™×©×™×ª ×œ×§×•×“: 6</div>
            </div>
        </div>

        <div id="modal-safe" class="modal-overlay">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModals()">X</span>
                <h2>×”×›×¡×¤×ª</h2>
                <p>×”×›×¡×¤×ª × ×¢×•×œ×”. ×“×¨×•×© ×§×•×“ ×‘×Ÿ 3 ×¡×¤×¨×•×ª.</p>
                <p>××¡×•×£ ××ª ×”×¡×¤×¨×•×ª ××›×œ ×”×—×¤×¦×™× ×‘×—×“×¨.</p>
                <input type="text" id="ans-safe" placeholder="___" maxlength="3" style="font-size: 2rem; letter-spacing: 10px;">
                <button onclick="checkFinalCode()">×¤×ª×— ×›×¡×¤×ª</button>
            </div>
        </div>

    </div>

    <script>
        let cluesFound = 0;

        function openModal(id) {
            document.getElementById(id).style.display = 'flex';
        }

        function closeModals() {
            document.querySelectorAll('.modal-overlay').forEach(el => el.style.display = 'none');
        }

        function checkAnswer(inputId, correctAnswer, clueId) {
            const userAns = document.getElementById(inputId).value.trim(); // simple check
            
            // ×‘×“×™×§×” ×¤×©×•×˜×” (××›×™×œ×” ××ª ×”×ª×©×•×‘×”)
            if (userAns.includes(correctAnswer) || userAns === correctAnswer) {
                const clueEl = document.getElementById(clueId);
                if (clueEl.style.display !== 'block') {
                    clueEl.style.display = 'block';
                    cluesFound++;
                    document.getElementById('clue-count').innerText = cluesFound;
                }
            } else {
                alert('×ª×©×•×‘×” ×©×’×•×™×”. × ×¡×” ×©×•×‘.');
            }
        }

        function checkFinalCode() {
            const code = document.getElementById('ans-safe').value;
            if (code === '726') {
                document.getElementById('lab-scene').innerHTML = `
                    <div style="text-align:center; margin-top:150px;">
                        <h1 style="color:#00ff55; font-size:4rem;">×”×›×¡×¤×ª × ×¤×ª×—×”!</h1>
                        <p>××¦××ª ××ª ××¤×ª×— ×”×××¡×˜×¨ ×©×œ ×”×¨×›×‘×ª.</p>
                        <button onclick="location.reload()" style="font-size:1.5rem;">×”×ª×—×œ ××—×“×©</button>
                    </div>
                `;
            } else {
                alert('×§×•×“ ×©×’×•×™!');
                document.getElementById('lab-scene').style.boxShadow = "inset 0 0 100px red";
                setTimeout(() => document.getElementById('lab-scene').style.boxShadow = "none", 500);
            }
        }
    </script>
</body>
</html>
